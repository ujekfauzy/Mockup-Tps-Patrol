var isLoad = !1; $(document).ready(() => { $("body").addClass("sidebar-collapse"), $(".loadcard, .newcard, .designcard").css("display", "none"), $(document).on("click", "#btnnew", function () { $(".newcard").css("display", "block"), $(".loadcard").hide(), loadTemplate(-1), isLoad = !1 }), $(document).on("click", "#btnload", function () { $(".loadcard").css("display", "block"), $(".newcard").hide(), $(".designcard").css("display", "none"), isLoad = !0 }), $("button.btn").off("click"), document.getElementById("defaultOpen").click(), $("#ddlname").change(function () { loadTemplate(this.value) }), $("#ffedit").change(function () { let a = this.value; divCurrent !== void 0 && "" !== divCurrent && (divCurrent.style.fontFamily = a) }), $("#fsedit").change(function () { this.value; divCurrent !== void 0 && "" !== divCurrent && (divCurrent.style.fontSize = this.value + "px") }), $("button[name=align]").click(function (a) { let b = $("button[name=align]"); var c = a.currentTarget; b.each(function () { if ($(this).is(c)) { $(c).toggleClass("active"); let a = c.firstElementChild.classList[1].split("-").pop(); divCurrent.style.textAlign = a } else $(this).removeClass("active") }) }) }); function readImageFile() { const a = document.querySelector("img.image-preview-temp"), b = document.getElementById("inputaddimage").files[0], c = new FileReader; c.addEventListener("load", () => { a.src = c.result }, !1), b && c.readAsDataURL(b) } function loadTemplate(a) { $.ajax({ url: "./GetTemplate", data: { id: a }, success: function (a) { $(".designcard").css("display", "block"), $("div.target").html(a) } }) } function clearAttributeTarget(a) { a.resizable().resizable("destroy").removeClass("isSelected active"), a.children("img.close").hide(), a.css({ cursor: "default", overflow: "hidden" }) } function openEditor(a, b) { "undefined" !== component && "editbase" == b && clearAttributeTarget(component); let c, d, e; for (d = document.getElementsByClassName("tabcontent"), c = 0; c < d.length; c++)d[c].style.display = "none"; for (e = document.getElementsByClassName("tablinks"), c = 0; c < e.length; c++)e[c].className = e[c].className.replace(" active", ""); document.getElementById(b).style.display = "block", "BUTTON" == a.target.nodeName ? $(a.target).addClass("active") : ("I" == a.target.nodeName || "SPAN" == a.target.nodeName) && $(a.target.parentNode).addClass("active") } function rgb2hex(a) { var b = a.replace(/\s/g, "").match(/^rgba?\((\d+),(\d+),(\d+)/i); return b && 4 === b.length ? "#" + ("0" + parseInt(b[1], 10).toString(16)).slice(-2) + ("0" + parseInt(b[2], 10).toString(16)).slice(-2) + ("0" + parseInt(b[3], 10).toString(16)).slice(-2) : a } function selectElement(a, b) { let c = document.getElementById(a); c.value = b } function setElementInput(a, b) { a.classList.contains("noeditable") ? (document.getElementById("textedit").parentNode.style.display = "none", document.getElementById("inputeditimage").disabled = !0) : document.getElementById("textedit").parentNode.style.display = "block", document.getElementById("textedit").innerText = b.text, document.getElementById("coloredit").value = b.fontColor, selectElement("fsedit", b.fontSize.replace("px", "")), selectElement("ffedit", b.fontFamily), document.getElementById("inputRange").value = b.rotate, document.getElementById("outputRange").value = b.rotate, "bold" == b.fontWeight ? document.getElementsByName("bold")[0].classList.add("active") : document.getElementsByName("bold")[0].classList.remove("active"), "italic" == b.fontStyle ? document.getElementsByName("italic")[0].classList.add("active") : document.getElementsByName("italic")[0].classList.remove("active"), "underline" == b.textDecoration ? document.getElementsByName("underline")[0].classList.add("active") : document.getElementsByName("underline")[0].classList.remove("active"); let c = $("button[name=align]"), d = b.textAlign; c.each(function (a, b) { let c = b.firstElementChild.classList[1].split("-").pop(); c === d ? b.classList.add("active") : b.classList.remove("active") }) } function drawEditBase() { let a = $(".dropdiv.front"), b = document.getElementById("formeditbase").elements, c = {}; for (var d = 0; d < b.length; d++) { let a = b.item(d); c[a.name] = a.value } a.css({ width: c.width + "px", height: c.height + "px", "background-color": c.backgroundColor }) } function clearBackground() { let a = $(".dropdiv.front"); a.css({ "background-color": "#fff", "background-image": "none" }), $("#baseImage").val("") } function drawEditText() {let a = $(".componentDiv.active"), b = document.getElementById("formedit").elements, c = {}; for (var d = 0; d < b.length; d++) { let a = b.item(d); switch (a.name) { case "bold": c[a.name] = a.classList.contains("active") ? a.name : "normal"; break; case "italic": c[a.name] = a.classList.contains("active") ? a.name : "normal"; break; case "underline": c[a.name] = a.classList.contains("active") ? a.name : "none"; break; case "left": c.textAlign = "left"; break; case "right": c.textAlign = a.classList.contains("active") ? a.name : "left"; break; case "center": c.textAlign = a.classList.contains("active") ? a.name : "left"; break; default: c[a.name] = a.value; } } a.css({ "font-size": c.fontSize + "px", "font-family": c.fontFamily, color: c.fontColor, "font-weight": c.bold, "font-style": c.italic, "text-decoration": c.underline, "text-align": c.textAlign }).rotateElement(c.rotate), a.find("span.txtcontent").text(c.text) } function drawEditImage(a) { debugger; $("div.isSelected.active").find("img.picture").attr("src", window.URL.createObjectURL(a.files[0])) } function saveLayout() { clearAttributeTarget(component); debugger; let a, b = -1; if (isLoad) { let c = $("#ddlname").select2("data"); a = c[0].text, b = c[0].id } else if (a = $("#CardTemplate_Nama").val(), "" == a) return $("#CardTemplate_Nama").focus(), lookup.alertError("Failed to save, Please fill layout name"), !1; var c = $(".templateCard").prop("outerHTML"); c = c.replace(/>\s+|\s+</g, function (a) { return a.trim() }); var d = new SaveTemplate(b, a, c); $.ajax({ url: "./LayoutCard", type: "POST", data: d, success: a => { switch (a.message) { case "Success": lookup.alertSuccess(a.message, "./LayoutCard"); break; case "Error": lookup.alertError(a.message); } }, error: function (a) { alert(a.status), alert(a.responseText) } }) } function addText() { debugger; var a = Math.floor(1e7 * Math.random()), b = "editor" + a, c = document.getElementById("txtAdd").value; $("<div  id=\"" + b + "\" class=\"componentDiv\" style=\"position:absolute;overflow:hidden;font-family: Arial;font-size: 14px;\"><span class=\"txtcontent\">" + c + "</span><img class=\"close\" src=\"/Content/card-member/Close-512.jpg\" alt=\"\"></div>").draggable({ containment: "parent" }).appendTo(".dropdiv.front"), $("div#" + b).find("span").trigger("click"), component = $(".componentDiv") } function addBindingObject() { debugger; let a = document.getElementById("bindingtext"), b = Math.floor(1e7 * Math.random()), c = "editor" + b; "_photo" === a.options[a.selectedIndex].value ? $("<div  id=\"" + c + "\" class=\"componentDiv noeditable\" style=\"position:absolute;overflow:hidden;font-family: Arial;font-size: 14px;\"><div style=\"width:100%;height:100%;overflow:hidden;\"><img id=\"#" + a.options[a.selectedIndex].value + "\" class=\"picture\" src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAoAAAAHgCAIAAAC6s0uzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowMTA3OUM4M0JBOEMxMUUyODk1OUUwMDM4ODMyNkMyQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowMTA3OUM4NEJBOEMxMUUyODk1OUUwMDM4ODMyNkMyQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjAxMDc5QzgxQkE4QzExRTI4OTU5RTAwMzg4MzI2QzJCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAxMDc5QzgyQkE4QzExRTI4OTU5RTAwMzg4MzI2QzJCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+hmM2mwAAD65JREFUeNrs3elvVPW/wHGhm0YtGi9gIsaYGDVGRSVuaIya+MRoYpQnPvQ/EwRqN5ZCRcPWli5QWlq2QosFupe22GlLOzPtzPSeC7lcLz/Ezsp0eL0emKbMnJn59Nh3zyznW9zX1/cYAJBba40AAAQYAAQYABBgABBgAECAAUCAAQABBgABBgAEGAAEGAAEGAAQYAAQYABAgAFAgAEAAQYAAQYABBgABBgABBgAEGAAEGAAQIABQIABAAEGAAEGAAQYAAQYAAQYABBgABBgAECAAUCAAQABBgABBgAEGAAEGAAEGAAQYAAQYABAgAFAgAEAAQYAAQYABBgABBgABBgAEGAAEGAAQIABQIABAAEGAAEGAAQYAAQYAAQYABBgABBgAECAAUCAAQABBgABBgAEGAAEGAAEGAAQYAAQYABAgAFAgAEAAQYAAQYABBgABBgABBgAEGAAEGAAQIABQIABAAEGAAEGAAQYAAQYAAQYABBgABBgAECAAUCAAQABBgABBgAEGAAEGAAQYAAQYAAQYABAgAFAgAEAAQYAAQYABBgABBgAEGAAEGAAEGAAQIABQIABAAEGAAEGAAQYAAQYABBgABBgABBgAECAAUCAAQABBgABBgAEGAAEGAAQYAAQYAAQYABAgAFAgAEAAQYAAQYABBgABBgAEGAAEGAAEGAAQIABQIABAAEGAAEGAAQYAAQYABBgABBgABBgAECAAUCAAQABBgABBgAEGAAEGAAQYAAQYAAQYABAgAFAgAEAAQYAAQYABBgABBgAEGAAEGAAEGAAQIABQIABAAEGAAEGAAQYAAQYABBgABBgABBgAECAAUCAAQABBgABBgAEGABWkWIjIP91dXXFYrGioiKjYCXi8XhpaenmzZuNAgGGtBw6dCgSiRQX211ZkeDPtSeffFKAEWBIVzgcTiQSwWGNUbBCCwsLhkCe8xowq4Ann7HPIMAAgAADgAADAAIMAAIMAAgwAAgwAAgwACDAACDAAIAAA4AAAwACDAACDAD8f9YDpgCVlpZ+/vnnL774YjQaNY1Vf5Swdm0sFjt06ND09LRpIMCQ37t1cfHrr7++ceNGoygYTU1NAkyh/XFpBBSe5eXlcDhsDgUjOAKOx+PmgAADAAIMAAIMAAgwAAgwACDAACDAACDAAIAAA4AAAwAZ4FzQwIrMz89fu3ZtfHw8+CKRSJSUlDz99NObNm166aWXiov9JgEBBjJtaGioo6Ojv79/bm4uFov9/Z/KysrWrVv31ltvffDBB0899ZRZgQADGRAOhxsbG0+ePLm0tHTfC0Sj0YmJiaNHj3Z3d3/yySfvv//+2rVe2AIBBtIQCoWqqqoGBgZWcuGbN2/W1dWNjo5+8803JSUlpgcCDKRibm5u+/btwdFtUtfq6OgIjpW3bdvmOBj+lf9JgHstLi4Gx77J1veOs2fPHj9+3AxBgIGknTp16urVqylfvaGhYXBw0BhBgIEkhEKhlpaWdLaQSCSam5uD/xomCDCwUhcvXpybm0tzI5cvXx4dHTVMEGAgiXamv5F4PN7f32+YIMDAioRCocnJyYxsanh4+J6zdgACDNzf1NRUNBrNyKamp6cztSkQYKDARSKRTL15KhwOOwIGAQZybc2aNYYAAgysyOOPP56pk1gFm7JKEggwZFEhPdH63HPPZepMzuXl5aWlpXYPEGDIilAoVFNTc+PGjcJ4OM8+++z69eszsqlNmzZZlQEEGLKlvb39/Pnzu3fvnpmZKYxH9Nprr6W/kaKioldeecXuAQLMo2X5thzc0M2bNzs6Oh67/emdXbt2pX8CqXywefPm8vLy9CseHAHbFUGAeeTk5kTEzc3N8/Pzd74eGRmprq5eWFhY7aNbt27dxx9/nM4WSkpKtm7dakVCEGDIiuHh4XPnzv39O/39/fv27SuAs098+OGHr776aspX//TTT19++WV7CAgwZEVra2skErnnmxcvXqyrq4vH46v6oZWVlX399dcbN25M4bpvv/32F198YfcAAYasuH79etDa+/5Td3d30ODcvAidPevXr//xxx9feOGFpK713nvvfffdd0VFRfYQEGDIvEQi0dTU9ICP/3Z0dNTX16/2hxk0+KefftqyZctKXs0tLy//9ttvv//+++Do2R4CK+E8NZC03tsefJm2trYgRV999dWqfqRPPPFE0NR33333zJkzV65cue/bvINOv/HGG++8886GDRvsGyDAkC3RaLSxsXEll2xoaAga/Nlnn632h/zybVNTU+Pj4zdu3Lh169by8nJRUdG6deuef/75jRs3Bl/YMUCAIbsuXLgwNDS0wgv/8ccfpaWlH330UQE88P+67c0337z78rblFiAdXgOGJITD4ZaWlqSucvDgwc7OzkIawpr/ZX8AAYYcOX36dLKn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\" style=\"width:100%;height:100%;\"/></div><img class=\"close\" src=\"/Content/card-member/Close-512.jpg\" alt=\"\"></div>").draggable({ containment: "parent" }).resizable({ handles: "se", containment: "parent", minHeight: 30, minWidth: 15 }).appendTo(".dropdiv.front") : $("<div  id=\"" + c + "\" class=\"componentDiv noeditable\" style=\"position:absolute;overflow:hidden;font-family: Arial;font-size: 14px;\"><span class=\"txtcontent " + a.options[a.selectedIndex].value + "\">#" + a.options[a.selectedIndex].text + "</span><img class=\"close\" src=\"/Content/card-member/Close-512.jpg\" alt=\"\"></div>").draggable({ containment: "parent" }).appendTo(".dropdiv.front"), component = $(".componentDiv"), $("div#" + c).find("span").trigger("click") } function addImg() { let a = "/Content/Gambar/default.jpg", b = document.getElementById("image-temp").getAttribute("src"); b != null && "" != b && (a = b); let c = Math.floor(1e7 * Math.random()), d = "editor" + c; $(d).length && (d = "editor" + (c + 1)), $("<div  id=\"" + d + "\" class=\"componentDiv\"><div style=\"width:100%;height:100%;overflow:hidden;\"><img class=\"picture\" style=\"width:100%;height:100%;\" src=" + a + " width=\"70\" height=\"90\" /></div><img class=\"close\" src=\"/Content/card-member/Close-512.jpg\" alt=\"\"></div>").draggable({ containment: "parent" }).resizable({ handles: "se", containment: "parent", minHeight: 30, minWidth: 15 }).appendTo(".dropdiv.front"), component = $(".componentDiv") }